---
import Placeholder from './ui/Placeholder.astro';
import SearchArchitecture from './diagrams/SearchArchitecture';

const features = [
	{
		id: "dual-brain",
		title: "The Dual Brain",
		subtitle: "Instruct vs. Thinking",
		description: "BonsAI gives you two modes. Use 'Instruct' for the standard, fast chat experience you are used to. Toggle 'Thinking' to engage a reasoning model that visibly pauses to verify its logic before speaking. It provides extra power and depth for complex problems.",
		media: { type: "video", caption: "Fig 1: The Thinking Model deliberating before answering." },
		align: "left"
	},
	{
		id: "knowledge-grafting",
		title: "Knowledge Grafting",
		subtitle: "Feed the Soil",
		description: "Drag and drop PDFs or text files directly into a conversation. BonsAI grafts documents to specific chat contexts, allowing you to query your private data securely. Your sensitive financial docs or draft manuscripts never leave your SSD.",
		media: { type: "video", caption: "Fig 2: Local RAG. No upload bars. No cloud processing." },
		align: "right"
	},
	{
		id: "digital-gardening",
		title: "Digital Gardening",
		subtitle: "Deep Roots",
		description: "Cloud AI suffers from amnesia. BonsAI learns.<br/><br/><strong>The Bio-Card:</strong> A living record where you define who you are.<br/><strong>Clippings:</strong> Highlight any text in a chat to 'Clip' it to long-term memory.<br/><strong>Saplings:</strong> Grow distinct Personas for different tasksâ€”a 'Junior Dev' for coding, a 'Plot Architect' for writing.",
		media: { type: "image", caption: "Fig 3: The Bio-Card & Saplings personalization engine." },
		align: "left"
	},
	{
		id: "privacy-search",
		title: "Privacy Search",
		subtitle: "Forage Responsibly",
		description: "Sometimes the answer isn't on your hard drive. BonsAI includes a private, scraper-based search tool. It fetches live data from the web without using tracked APIs or exposing your identity to Big Tech. You open the gate, fetch the data, and close it.",
		media: null,
		align: "right"
	}
];
---

<section class="py-24 px-4 space-y-32">
    {features.map((feature, index) => (
        <div id={feature.id} class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12 md:gap-20 items-center">
            {/* Text Side */}
            <div class:list={["space-y-6", feature.align === 'right' ? 'md:order-2' : 'md:order-1']}>
                
                <h3 class="font-heading font-bold text-4xl text-charcoal-ink">
                    {feature.title}
                </h3>
                <h4 class="font-heading font-medium text-2xl text-terracotta italic mb-4">
                    {feature.subtitle}
                </h4>
                
                <div class="prose prose-lg text-charcoal-ink/90 font-body leading-relaxed" set:html={feature.description}></div>
            </div>

            {/* Media Side */}
            <div class:list={["w-full", feature.align === 'right' ? 'md:order-1' : 'md:order-2']}>
                {feature.media && (
                    <Placeholder 
                        type={feature.media.type as any} 
                        caption={feature.media.caption} 
                        class="w-full transform transition-all duration-700 hover:scale-[1.01]"
                    />
                )}
                {!feature.media && (
                    <SearchArchitecture client:visible />
                )}
            </div>
        </div>
    ))}
</section>
